<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Perfil</title>

  <link rel="stylesheet" href="../css/reset.css" />
  <link rel="stylesheet" href="../css/style.css" />
</head>

<body class="page-profile">
  <main class="container">
    <section class="card profile-card">
      
      <div class="profile-avatar">
        <img src="../img/user.png" alt="Foto de perfil" />
      </div>

      <!-- TÃTULO COM O NOME (vai ser atualizado automaticamente) -->
      <h1 class="profile-title" id="title-name">YOUR NAME</h1>

      <!-- INPUT DE NOME -->
      <label for="nome" class="profile-label">Digite seu nome</label>
      <input
        type="text"
        id="nome"
        class="profile-input"
        placeholder="type your name"
      >

      <button id="save-name-btn" class="btn-save-name">
        Save name
      </button>

      <p class="profile-subtitle">choose your vibe:</p>

      <!-- VIBES -->
      <div class="vibes">
        <a href="#" class="vibe-link vibe-explorer" data-vibe="explorer">
          Explorer
        </a>

        <a href="#" class="vibe-link vibe-foodie" data-vibe="foodie">
          Foodie
        </a>

        <a href="#" class="vibe-link vibe-party" data-vibe="party">
          Party Lover
        </a>
      </div>

      <p class="back-link">
        <a href="index.html" class="text-link js-nav">return to the start</a>
      </p>

    </section>
  </main>

  <!-- ===================== JAVA SCRIPT ===================== -->
  <script>
    document.addEventListener('DOMContentLoaded', function () {

      /* ----------- 1. CARREGAR NOME SALVO ----------- */
      const inputNome = document.querySelector('#nome');
      const titleName = document.querySelector('#title-name');
      const saveBtn   = document.querySelector('#save-name-btn');

      const nomeSalvo = localStorage.getItem('userName');
      if (nomeSalvo) {
        inputNome.value = nomeSalvo;
        titleName.textContent = nomeSalvo.toUpperCase();
      }


      /* ----------- 2. SALVAR NOME ----------- */
      saveBtn.addEventListener('click', function () {
        const nome = inputNome.value.trim();
        if (nome.length === 0) return;

        localStorage.setItem('userName', nome);
        titleName.textContent = nome.toUpperCase();
      });


      /* ----------- 3. ANIMAÃ‡ÃƒO + SALVAMENTO DA VIBE ----------- */
      const vibeLinks = document.querySelectorAll('.vibe-link');

      function spawnBurst(vibe, x, y) {
        const emojisByVibe = {
          explorer: ['ğŸŒ¿', 'â›°ï¸', 'ğŸŒ', 'ğŸŒ³'],
          foodie:   ['ğŸ•', 'ğŸ£', 'ğŸ”', 'ğŸ°'],
          party:    ['ğŸ‰', 'ğŸŠ', 'ğŸ¥³', 'ğŸˆ']
        };

        const emojis = emojisByVibe[vibe] || ['âœ¨'];

        for (let i = 0; i < 12; i++) {
          const span = document.createElement('span');
          span.className = 'vibe-burst';
          span.textContent = emojis[Math.floor(Math.random()*emojis.length)];

          const offsetX = (Math.random() - 0.5) * 120;
          const startX = x + offsetX;
          const startY = y + (Math.random()*40 - 20);

          span.style.left = startX + 'px';
          span.style.top  = startY + 'px';

          document.body.appendChild(span);

          setTimeout(() => span.remove(), 900);
        }
      }

      vibeLinks.forEach(link => {
        link.addEventListener('click', function (event) {
          event.preventDefault();

          const vibe = link.dataset.vibe;
          localStorage.setItem('userVibe', vibe);

          const rect = link.getBoundingClientRect();
          const cx = rect.left + rect.width / 2;
          const cy = rect.top + rect.height / 2;

          spawnBurst(vibe, cx, cy);
        });
      });

    });
  </script>

</body>
</html>